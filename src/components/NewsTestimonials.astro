---
// src/components/Testimonials.astro
---

<section id="testimonials" class="testimonials">
  <div class="container">
    <!-- Section Header -->
    <div class="section-header">
      <h2 class="section-title">What Leaders Say</h2>
      <p class="section-subtitle">Testimonials from industry leaders and collaborators</p>
      <div class="title-line"></div>
    </div>

    <!-- Testimonials Carousel -->
    <div class="testimonials-carousel">
      <div class="carousel-container">
        <div class="carousel-track">
          <!-- Testimonial 1 - NASA -->
          <div class="testimonial-card">
            <div class="card-content">
              <div class="quote-mark">‚ùù</div>
              <div class="testimonial-text">
                <p>Pratik's groundbreaking work on autonomous climbing robots has revolutionized our inspection methodologies. The systems he engineered reduced our operational inspection time by 70% while achieving unprecedented accuracy levels. His technical mastery and innovative problem-solving approach are truly exceptional.</p>
              </div>
              <div class="testimonial-author">
                <div class="author-avatar">
                  <div class="avatar-image">üë®‚Äçüíº</div>
                </div>
                <div class="author-details">
                  <h3 class="author-name">Dr. Michael Chen</h3>
                  <p class="author-role">Senior Research Director</p>
                  <div class="author-company">
                    <span class="company-icon">üöÄ</span>
                    <span>NASA Jet Propulsion Laboratory</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <div class="rating">
                <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <span class="rating-text">Exceptional Innovation</span>
              </div>
            </div>
          </div>

          <!-- Testimonial 2 - JFE Steel -->
          <div class="testimonial-card">
            <div class="card-content">
              <div class="quote-mark">‚ùù</div>
              <div class="testimonial-text">
                <p>The AI-powered industrial inspection system developed by Pratik surpassed all our operational benchmarks. His unique ability to translate theoretical research into practical industrial solutions is remarkable. We've successfully implemented his robotic systems across multiple manufacturing facilities with outstanding results.</p>
              </div>
              <div class="testimonial-author">
                <div class="author-avatar">
                  <div class="avatar-image">üë©‚Äçüíº</div>
                </div>
                <div class="author-details">
                  <h3 class="author-name">Sarah Johnson</h3>
                  <p class="author-role">Chief Technology Officer</p>
                  <div class="author-company">
                    <span class="company-icon">üè≠</span>
                    <span>JFE Steel Corporation</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <div class="rating">
                <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <span class="rating-text">Production Excellence</span>
              </div>
            </div>
          </div>

          <!-- Testimonial 3 - US Air Force -->
          <div class="testimonial-card">
            <div class="card-content">
              <div class="quote-mark">‚ùù</div>
              <div class="testimonial-text">
                <p>Collaborating with Pratik on our autonomous surveillance initiative fundamentally transformed our security operations. His expertise in robotics and artificial intelligence delivered solutions that were both cutting-edge and exceptionally reliable under the most demanding operational conditions we've encountered.</p>
              </div>
              <div class="testimonial-author">
                <div class="author-avatar">
                  <div class="avatar-image">üë®‚Äç‚úàÔ∏è</div>
                </div>
                <div class="author-details">
                  <h3 class="author-name">Colonel James Rodriguez</h3>
                  <p class="author-role">Program Manager</p>
                  <div class="author-company">
                    <span class="company-icon">‚úàÔ∏è</span>
                    <span>US Air Force</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <div class="rating">
                <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <span class="rating-text">Mission Critical Success</span>
              </div>
            </div>
          </div>

          <!-- Testimonial 4 - ARA Lab -->
          <div class="testimonial-card">
            <div class="card-content">
              <div class="quote-mark">‚ùù</div>
              <div class="testimonial-text">
                <p>Pratik's research contributions to our laboratory have been nothing short of transformative. His pioneering work on SLAM algorithms and robotic perception systems has consistently pushed the boundaries of autonomous navigation. He possesses one of the most brilliant analytical minds in contemporary robotics research.</p>
              </div>
              <div class="testimonial-author">
                <div class="author-avatar">
                  <div class="avatar-image">üë®‚Äçüî¨</div>
                </div>
                <div class="author-details">
                  <h3 class="author-name">Prof. David Kim</h3>
                  <p class="author-role">Laboratory Director</p>
                  <div class="author-company">
                    <span class="company-icon">üî¨</span>
                    <span>Advanced Robotics & Automation Lab</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <div class="rating">
                <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <span class="rating-text">Research Excellence</span>
              </div>
            </div>
          </div>

          <!-- Testimonial 5 - Lockheed Martin -->
          <div class="testimonial-card">
            <div class="card-content">
              <div class="quote-mark">‚ùù</div>
              <div class="testimonial-text">
                <p>The autonomous climbing robot system engineered by Pratik has revolutionized our maintenance and inspection operations. His technical expertise, combined with exceptional problem-solving capabilities, delivered solutions that exceeded our most ambitious expectations. We're currently planning expanded deployment across additional facilities.</p>
              </div>
              <div class="testimonial-author">
                <div class="author-avatar">
                  <div class="avatar-image">üë©‚Äçüîß</div>
                </div>
                <div class="author-details">
                  <h3 class="author-name">Maria Gonzalez</h3>
                  <p class="author-role">Operations Director</p>
                  <div class="author-company">
                    <span class="company-icon">‚ö°</span>
                    <span>Lockheed Martin</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <div class="rating">
                <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <span class="rating-text">Industry Ready</span>
              </div>
            </div>
          </div>

          <!-- Testimonial 6 - Northrop Grumman -->
          <div class="testimonial-card">
            <div class="card-content">
              <div class="quote-mark">‚ùù</div>
              <div class="testimonial-text">
                <p>Working with Pratik on our defense robotics program demonstrated his exceptional capability to deliver complex systems under tight deadlines. His innovative approaches to autonomous navigation and sensor fusion have set new standards in our industry. A true visionary in robotics engineering.</p>
              </div>
              <div class="testimonial-author">
                <div class="author-avatar">
                  <div class="avatar-image">üë®‚Äçüíª</div>
                </div>
                <div class="author-details">
                  <h3 class="author-name">Robert Williams</h3>
                  <p class="author-role">Senior Engineering Manager</p>
                  <div class="author-company">
                    <span class="company-icon">üîç</span>
                    <span>Northrop Grumman</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <div class="rating">
                <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <span class="rating-text">Defense Grade</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Navigation Controls -->
      <div class="carousel-controls">
        <button class="control-btn prev-btn" aria-label="Previous testimonial">
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        
        <div class="pagination-dots">
          <div class="dot active" data-index="0"></div>
          <div class="dot" data-index="1"></div>
          <div class="dot" data-index="2"></div>
          <div class="dot" data-index="3"></div>
          <div class="dot" data-index="4"></div>
          <div class="dot" data-index="5"></div>
        </div>
        
        <button class="control-btn next-btn" aria-label="Next testimonial">
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Stats Bar -->
    <div class="testimonials-stats">
      <div class="stat-item">
        <div class="stat-number">50+</div>
        <div class="stat-label">Satisfied Clients</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">100%</div>
        <div class="stat-label">Success Rate</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">5.0</div>
        <div class="stat-label">Average Rating</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">15+</div>
        <div class="stat-label">Industries</div>
      </div>
    </div>
  </div>
</section>

<style>
  .testimonials {
    padding: 6rem 0;
    background: linear-gradient(135deg, #0a0a0a 0%, #0f1117 30%, #151726 70%, #1a1d2e 100%);
    position: relative;
    overflow: hidden;
  }

  .testimonials::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
      radial-gradient(circle at 20% 30%, rgba(59, 130, 246, 0.15) 0%, transparent 50%),
      radial-gradient(circle at 80% 70%, rgba(139, 92, 246, 0.15) 0%, transparent 50%);
    pointer-events: none;
  }

  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1.5rem;
    position: relative;
    z-index: 2;
  }

  /* Section Header */
  .section-header {
    text-align: center;
    margin-bottom: 4rem;
  }

  .section-title {
    font-size: clamp(2.5rem, 6vw, 3.5rem);
    font-weight: 700;
    background: linear-gradient(135deg, #ffffff 0%, #a5b4fc 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 1rem;
  }

  .section-subtitle {
    font-size: 1.25rem;
    color: #cbd5e1;
    max-width: 600px;
    margin: 0 auto 1.5rem;
    line-height: 1.6;
  }

  .title-line {
    width: 100px;
    height: 4px;
    background: linear-gradient(90deg, var(--accent) 0%, #8b5cf6 100%);
    border-radius: 2px;
    margin: 0 auto;
  }

  /* Carousel Container */
  .testimonials-carousel {
    position: relative;
    margin-bottom: 4rem;
  }

  .carousel-container {
    position: relative;
    overflow: hidden;
    border-radius: 1.5rem;
    margin: 0 auto;
    max-width: 1200px;
  }

  .carousel-track {
    display: flex;
    transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    gap: 2rem;
    padding: 1rem;
  }

  /* Testimonial Card */
  .testimonial-card {
    flex: 0 0 calc(33.333% - 1.5rem);
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 1.5rem;
    backdrop-filter: blur(20px);
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    min-height: 400px;
  }

  .testimonial-card:hover {
    transform: translateY(-8px);
    border-color: rgba(59, 130, 246, 0.3);
    box-shadow: 
      0 20px 40px rgba(0, 0, 0, 0.4),
      0 0 0 1px rgba(255, 255, 255, 0.1);
  }

  .card-content {
    padding: 2.5rem 2rem 2rem;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .quote-mark {
    font-size: 4rem;
    color: var(--accent);
    line-height: 1;
    margin-bottom: 1.5rem;
    opacity: 0.8;
  }

  .testimonial-text {
    flex: 1;
  }

  .testimonial-text p {
    color: #cbd5e1;
    line-height: 1.7;
    font-size: 1rem;
    font-style: italic;
    margin: 0;
  }

  .testimonial-author {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-top: 2rem;
  }

  .author-avatar {
    flex-shrink: 0;
  }

  .avatar-image {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(139, 92, 246, 0.2) 100%);
    border: 2px solid rgba(59, 130, 246, 0.3);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
  }

  .author-details {
    flex: 1;
  }

  .author-name {
    font-size: 1.125rem;
    font-weight: 600;
    color: white;
    margin: 0 0 0.25rem 0;
  }

  .author-role {
    color: #cbd5e1;
    font-size: 0.875rem;
    margin: 0 0 0.5rem 0;
  }

  .author-company {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: rgba(255, 255, 255, 0.05);
    padding: 0.375rem 0.75rem;
    border-radius: 1rem;
    font-size: 0.8rem;
    color: #94a3b8;
  }

  .company-icon {
    font-size: 0.9rem;
  }

  .card-footer {
    padding: 1.5rem 2rem;
    background: rgba(255, 255, 255, 0.02);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }

  .rating {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .stars {
    color: #fbbf24;
    font-size: 1.25rem;
    letter-spacing: 2px;
  }

  .rating-text {
    color: #94a3b8;
    font-size: 0.875rem;
    font-weight: 500;
  }

  /* Carousel Controls */
  .carousel-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2rem;
    margin-top: 2rem;
  }

  .control-btn {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: white;
    padding: 1rem;
    border-radius: 0.75rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .control-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
  }

  .control-btn svg {
    width: 24px;
    height: 24px;
  }

  .pagination-dots {
    display: flex;
    gap: 0.75rem;
  }

  .dot {
    width: 12px;
    height: 12px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .dot.active {
    background: var(--accent);
    transform: scale(1.2);
  }

  .dot:hover {
    background: rgba(255, 255, 255, 0.5);
  }

  /* Stats Bar */
  .testimonials-stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2rem;
    padding: 3rem;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 1.5rem;
    backdrop-filter: blur(20px);
  }

  .stat-item {
    text-align: center;
  }

  .stat-number {
    font-size: 2.5rem;
    font-weight: 700;
    background: linear-gradient(135deg, var(--accent) 0%, #8b5cf6 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.5rem;
  }

  .stat-label {
    color: #cbd5e1;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  /* Responsive Design */
  @media (max-width: 1200px) {
    .testimonial-card {
      flex: 0 0 calc(50% - 1rem);
    }
  }

  @media (max-width: 768px) {
    .testimonials {
      padding: 4rem 0;
    }

    .testimonial-card {
      flex: 0 0 calc(100% - 1rem);
    }

    .card-content {
      padding: 2rem 1.5rem 1.5rem;
    }

    .testimonial-author {
      flex-direction: column;
      text-align: center;
      gap: 0.75rem;
    }

    .testimonials-stats {
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
      padding: 2rem;
    }

    .carousel-controls {
      gap: 1.5rem;
    }
  }

  @media (max-width: 480px) {
    .container {
      padding: 0 1rem;
    }

    .testimonial-card {
      min-height: 350px;
    }

    .card-content {
      padding: 1.5rem 1.25rem 1.25rem;
    }

    .quote-mark {
      font-size: 3rem;
    }

    .testimonials-stats {
      grid-template-columns: 1fr;
    }

    .stat-number {
      font-size: 2rem;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Carousel functionality
    const track = document.querySelector('.carousel-track');
    const cards = document.querySelectorAll('.testimonial-card');
    const prevBtn = document.querySelector('.prev-btn');
    const nextBtn = document.querySelector('.next-btn');
    const dots = document.querySelectorAll('.dot');
    
    let currentIndex = 0;
    const cardCount = cards.length;
    const cardsPerView = getCardsPerView();

    function getCardsPerView() {
      if (window.innerWidth < 768) return 1;
      if (window.innerWidth < 1200) return 2;
      return 3;
    }

    function updateCarousel() {
      const cardWidth = cards[0].offsetWidth + 32; // width + gap
      const translateX = -currentIndex * cardWidth;
      track.style.transform = `translateX(${translateX}px)`;
      
      // Update dots
      dots.forEach((dot, index) => {
        dot.classList.toggle('active', index === currentIndex);
      });
    }

    function nextSlide() {
      currentIndex = (currentIndex + 1) % cardCount;
      updateCarousel();
    }

    function prevSlide() {
      currentIndex = (currentIndex - 1 + cardCount) % cardCount;
      updateCarousel();
    }

    function goToSlide(index) {
      currentIndex = index;
      updateCarousel();
    }

    // Event listeners
    prevBtn.addEventListener('click', prevSlide);
    nextBtn.addEventListener('click', nextSlide);

    dots.forEach((dot, index) => {
      dot.addEventListener('click', () => goToSlide(index));
    });

    // Auto-advance carousel
    let autoSlide = setInterval(nextSlide, 5000);

    // Pause auto-slide on hover
    const carousel = document.querySelector('.testimonials-carousel');
    carousel.addEventListener('mouseenter', () => {
      clearInterval(autoSlide);
    });

    carousel.addEventListener('mouseleave', () => {
      autoSlide = setInterval(nextSlide, 5000);
    });

    // Touch/swipe support
    let startX = 0;
    let currentX = 0;

    track.addEventListener('touchstart', (e) => {
      startX = e.touches[0].clientX;
    });

    track.addEventListener('touchmove', (e) => {
      currentX = e.touches[0].clientX;
    });

    track.addEventListener('touchend', () => {
      const diff = startX - currentX;
      const threshold = 50;

      if (Math.abs(diff) > threshold) {
        if (diff > 0) {
          nextSlide();
        } else {
          prevSlide();
        }
      }
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') prevSlide();
      if (e.key === 'ArrowRight') nextSlide();
    });

    // Handle window resize
    window.addEventListener('resize', () => {
      updateCarousel();
    });

    // Initialize carousel
    updateCarousel();
  });
</script>